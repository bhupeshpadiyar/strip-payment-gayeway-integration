<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="favicon.ico">

  <title>Stripe Payment gateway integration example success page</title>

  <!-- Custom styles for this template -->
  <link href="./css/main.css" rel="stylesheet">
  <link href="./css/main.css" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

  <script src="https://js.stripe.com/v3/"></script>

      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-EREG5VCFV5"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-EREG5VCFV5');
      </script>
</head>

<body>

  <div class="d-flex mb-4 flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
    <h5 class="my-0 mr-md-auto font-weight-normal">
      <a class="" href="https://www.bhupeshpadiyar.com">BHUPESHPADIYAR.COM</a>

    </h5>
    <!-- <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="#">Features</a>
        <a class="p-2 text-dark" href="#">Enterprise</a>
        <a class="p-2 text-dark" href="#">Support</a>
        <a class="p-2 text-dark" href="#">Pricing</a>
      </nav> -->
    <a class="btn btn-outline-primary" href="https://www.bhupeshpadiyar.com">Blogs</a>
  </div>

  <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4 text-success">Payment success!!</h1>
    <p class="lead">
    <div class="alert alert-success" role="alert">
      Your payment has been approved successfully!!
    </div>
    </p>
  </div>


  <div class="container">


    <div class="col-lg-12">
      <button type="button" class="list-group-item list-group-item-action active">
        Payment Details
      </button>
      <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Transaction ID
          <span class="badge badge-primary badge-pill" id="transactionId"></span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Payment Status
          <span class="badge badge-primary badge-pill" id="paymentStatus"></span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Payment Amount
          <span class="badge badge-primary badge-pill" id="paymentAmount"></span>
        </li>

        <li class="list-group-item d-flex justify-content-between align-items-center">
          Payment Method
          <span class="badge badge-primary badge-pill" id="paymentMethod"></span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Customer Id
          <span class="badge badge-primary badge-pill" id="customerId"></span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Payment Intent
          <span class="badge badge-primary badge-pill" id="paymentIntent"></span>
        </li>
      </ul>

    </div>


    <div class="col-lg-12 mt-2">

      <button type="button" class="list-group-item list-group-item-action active">
        Transaction Details JSON Response
      </button>
      <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <!-- <textarea class="form-control" rows="10" id="jsonResponseTextArea"></textarea> -->
          <pre>

          </pre>
        </li>

      </ul>
    </div>

    <div class="col-lg-12 mt-2 text-center">
      <a type="button" href="https://bhupeshpadiyar.com/poc/stripe/index.html" class="btn btn-lg btn-success">Restart Demo</a>
    </div>

  </div>


  <div class="container">


    <footer class="pt-4 my-md-5 mt-4 pt-md-5 border-top">
      <div class="row">
        <div class="col-12 col-md ml-1 mb-1">
          Develped By :
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-md">
          <img class="mb-2" src="favicon.ico" alt="" width="24" height="24">
          <a href="https://www.bhupeshpadiyar.com">Bhupesh Singh Padiyar</a>
          <small class="d-block mb-3 text-muted">&copy; 2020-2021</small>
        </div>
        <!-- <div class="col-6 col-md">
            <h5>Linkedin</h5>
            <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Bhupesh Singh Padiyar</a></li>
            </ul>
          </div>
          <div class="col-6 col-md">
            <h5>Resources</h5>
            <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Resource</a></li>
            </ul>
          </div> -->
        <div class="col-6 col-md">
          <h5><a class="" target="_blank" href="http://aboutme.bhupeshpadiyar.com">About Me</a></h5>
          <!-- <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Team</a></li>
            </ul> -->
        </div>
      </div>
    </footer>
  </div>



  <div class="modal" id="loadingModal"  role="dialog">
      <div class="modal-dialog modal-dialog-centered d-flex justify-content-center" role="document">
          <div class="spinner-border" role="status">
              <span class="sr-only">Loading...</span>
          </div>
      </div>
  </div>

  <!-- Bootstrap core JavaScript
    ================================================== -->

  <script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>
  <script>window.jQuery || document.write('<script src="./js/jquery.min.js"><\/script>')</script>
  <!-- <script src='./js/proper.min.js'></script>
    <script src='./js/bootstrap.min.js'></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>
  <script src='./js/holder.min.js'></script>

  <script>
    Holder.addTheme('thumb', {
      bg: '#55595c',
      fg: '#eceeef',
      text: 'Thumbnail'
    });
  </script>

  <script type="text/javascript">
    // Create an instance of the Stripe object with your publishable API key
    var stripe = Stripe("your_public_key_here");
    var checkoutButton = document.getElementById("checkout-button");

    var urlParams = new URLSearchParams(window.location.search);
    var sessionId = urlParams.get("session_id");

    console.log(sessionId);

    $('#loadingModal').modal('show');
  

    $.ajax('https://stripe-nodejs-backend.herokuapp.com/checkout-session?sessionId=' + sessionId, {
      dataType: 'json', // type of response data
      method: 'GET',
      success: function (data, status, xhr) {   // success callback function
        console.log(data);
        var formattedAmount = data.amount_total/100;

        $('#loadingModal').modal('hide');
        $("#transactionId").text(data.id);
        $("#paymentAmount").text(formattedAmount.toFixed(2));
        $("#paymentStatus").text(data.payment_status);
        $("#paymentMethod").text(data.payment_method_types[0]);
        $("#customerId").text(data.customer);
        $("#paymentIntent").text(data.payment_intent);

        var sessionJSON = JSON.stringify(data, null, 2);
          document.querySelector("pre").textContent = sessionJSON;
        },
      error: function (jqXhr, textStatus, errorMessage) { // error callback 
        console.log(errorMessage);
        $('#loadingModal').modal('hide');
      }
    });


  </script>

</body>

</html>