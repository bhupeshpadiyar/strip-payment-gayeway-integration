
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Stripe Payment gateway integration example</title>

      <!-- Custom styles for this template -->
    <link href="./css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EREG5VCFV5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-EREG5VCFV5');
  </script>
  </head>

  <body>

    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <h5 class="my-0 mr-md-auto font-weight-normal">
        <a class="" href="https://www.bhupeshpadiyar.com">BHUPESHPADIYAR.COM</a>
        
      </h5>
      <!-- <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="#">Features</a>
        <a class="p-2 text-dark" href="#">Enterprise</a>
        <a class="p-2 text-dark" href="#">Support</a>
        <a class="p-2 text-dark" href="#">Pricing</a>
      </nav> -->
      <a class="btn btn-outline-primary" href="https://www.bhupeshpadiyar.com">Blogs</a>
    </div>

    <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
      <h1 class="display-4">Stripe Checkout Demo</h1>
      <p class="lead">
        This is a quick demonenstration of Stripe Payment gateway checkout integration in <b>Java</b> & <b>NodeJS</b>.
      </p>
    </div>

    <div class="container">
      <div class="card-deck mb-3 text-center">
        <div class="card mb-4 shadow-sm">
          <div class="card-header">
            <h4 class="my-0 font-weight-normal">iPhone 12 Mini</h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">$699</h1>
            <img class="img-fluid" src="https://i.ibb.co/z8YdmXC/iphone-12-mini.png">
            <ul class="list-unstyled mt-3 mb-4">
              <li>64 GB of storage</li>
            </ul>
            <button type="button" id="iphone12mini" onclick="checkout('iphone12mini', 699);" class="btn btn-lg btn-block btn-outline-primary">
              Checkout
            </button>
          </div>
        </div>
        <div class="card mb-4 shadow-sm">
          <div class="card-header">
            <h4 class="my-0 font-weight-normal">iPhone 12</h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">$799</h1>
            <img class="img-fluid" src="https://i.ibb.co/TDQjMSd/iphone-12-red.png">
            <ul class="list-unstyled mt-3 mb-4">
              <li>64 GB of storage</li>
            </ul>
            <button type="button" id="iphone12" onclick="checkout('iphone12', 799);" class="btn btn-lg btn-block btn-outline-primary">Checkout</button>
          </div>
        </div>
        <div class="card mb-4 shadow-sm">
          <div class="card-header">
            <h4 class="my-0 font-weight-normal">iPhone 12 Pro</h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">$999</h1>
            <img class="img-fluid" src="https://i.ibb.co/Tcj0zy4/iphone-12-pro.png">
            <ul class="list-unstyled mt-3 mb-4">
              <li>128 GB of storage</li>
            </ul>
            <button type="button" id="iphone12pro" onclick="checkout('iphone12pro', 999);"
            class="btn btn-lg btn-block btn-outline-primary">Checkout</button>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="col-lg-12">
          <button type="button" class="list-group-item list-group-item-action active">
            Testing Credit/Debit cards
          </button>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">Card Type</th>
                  <th scope="col">Card Number</th>
                  <th scope="col">CVC</th>
                  <th scope="col">Expiry</th>
                </tr>
              </thead>
              <tbody>
              
                <tr>
                  <th scope="row">Visa</th>
                  <td>4242424242424242</td>
                  <td>123</td>
                  <td>Any Date After Today</td>
                </tr>
                <tr>
                  <th scope="row">Visa</th>
                  <td>4111111111111111</td>
                  <td>123</td>
                  <td>Any Date After Today</td>
                </tr>
                
              </tbody>
            </table>
          </div>
      </div>

      <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
          <div class="col-12 col-md ml-1 mb-1">
            Develped By : 
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md">
            <img class="mb-2" src="favicon.ico" alt="" width="24" height="24">
            <a href="https://www.bhupeshpadiyar.com">Bhupesh Singh Padiyar</a>
            <small class="d-block mb-3 text-muted">&copy; 2020-2021</small>
          </div>
          <!-- <div class="col-6 col-md">
            <h5>Linkedin</h5>
            <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Bhupesh Singh Padiyar</a></li>
            </ul>
          </div>
          <div class="col-6 col-md">
            <h5>Resources</h5>
            <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Resource</a></li>
            </ul>
          </div> -->
          <div class="col-6 col-md">
            <h5><a class="" target="_blank" href="http://aboutme.bhupeshpadiyar.com">About Me</a></h5>
            <!-- <ul class="list-unstyled text-small">
              <li><a class="text-muted" href="#">Team</a></li>
            </ul> -->
          </div>
        </div>
      </footer>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
   
     
    <script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>
    <script>window.jQuery || document.write('<script src="./js/jquery.min.js"><\/script>')</script>
    <!-- <script src='./js/proper.min.js'></script>
    <script src='./js/bootstrap.min.js'></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src='./js/holder.min.js'></script>

    <script>
        Holder.addTheme('thumb', {
          bg: '#55595c',
          fg: '#eceeef',
          text: 'Thumbnail'
        });
      </script>

    <script type="text/javascript">
      // Create an instance of the Stripe object with your publishable API key
      var stripe = Stripe("pk_test_51HeebsDPkWxsnwhpOn9e97oEGRMd6GfBSF0QiMa8SA72Qnw0UCfoEsYcr7iJNleqZlfQ4YArqqoAx2c80W7j8UVD00qyUYlrke");
      var checkoutButton = document.getElementById("checkout-button");
      
      function showLoader(iphoneName){

        var loaderContent = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span class="sr-only">Please wait...</span>';
        $("#"+iphoneName).empty();
        $("#"+iphoneName).append(loaderContent);
        $("button").attr("disabled", true)

     }

    function hideLoader(iphoneName){
      var loaderContent = 'Checkout';
      $("#"+iphoneName).empty();
      $("#"+iphoneName).attr("disabled", false)
      $("button").attr("disabled", false)
      $("#"+iphoneName).append(loaderContent);
    }
      
      function checkout(iphoneName, price) {

        showLoader(iphoneName);
    
        $.ajax('https://stripe-nodejs-backend.herokuapp.com/create-session', {
                dataType: 'json', // type of response data
                method: 'POST',
                data: {price: price, 'iphone': iphoneName},
                success: function (data,status,xhr) {   // success callback function
                  console.log(data)
                  return stripe.redirectToCheckout({ sessionId: data.id });
                  hideLoader(iphoneName);
                },
                error: function (jqXhr, textStatus, errorMessage) { // error callback 
                  hideLoader(iphoneName);
                  console.log(errorMessage)
                }
          });
      }
    </script>

  </body>
</html>
